<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarity | Absolute Academic Power</title>
    <link rel="icon" href="Clarity Logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * { cursor: crosshair; }
        body { font-family: 'Inter', sans-serif; background: #fafafa; color: #0f172a; scroll-behavior: smooth; }
        .glass-nav { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .hero-gradient { background: radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.1) 0%, transparent 50%); }
        .auth-modal { backdrop-filter: blur(12px); background: rgba(15, 23, 42, 0.3); }
        .card-shadow { box-shadow: 0 20px 50px rgba(0,0,0,0.05); transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .card-shadow:hover { transform: translateY(-10px); box-shadow: 0 40px 80px rgba(99, 102, 241, 0.1); border-color: #6366f1; }
        .btn-aura { position: relative; overflow: hidden; transition: all 0.3s ease; }
        .btn-aura:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(99, 102, 241, 0.4); }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .floating { animation: float 6s ease-in-out infinite; }
        .text-glow { text-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
    </style>
</head>
<body class="hero-gradient">

    <nav class="fixed top-0 w-full z-[100] glass-nav px-8 py-5 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <img src="Clarity Logo.png" class="h-10 floating">
            <span class="text-2xl font-black tracking-tighter italic">Clarity.</span>
        </div>
        <div class="hidden md:flex gap-8 font-bold text-slate-400">
            <a href="#features" class="hover:text-black transition">Intelligence</a>
            <a href="#pricing" class="hover:text-black transition">Pricing</a>
            <a href="#about" class="hover:text-black transition">Aura</a>
        </div>
        <button onclick="toggleAuth(true)" class="bg-black text-white px-8 py-3 rounded-full font-black text-sm hover:scale-105 transition-all">SIGN IN</button>
    </nav>

    <header class="pt-48 pb-32 px-6 text-center max-w-5xl mx-auto">
        <div class="inline-flex items-center gap-2 bg-indigo-50 border border-indigo-100 px-4 py-1 rounded-full mb-8">
            <span class="flex h-2 w-2 rounded-full bg-indigo-600 animate-pulse"></span>
            <span class="text-[10px] font-black uppercase tracking-widest text-indigo-600">v2.0 Logic Engaged</span>
        </div>
        <h1 class="text-7xl md:text-9xl font-black tracking-tighter leading-[0.8] mb-10">Study with <br><span class="text-indigo-600 italic">Total Clarity.</span></h1>
        <p class="text-xl md:text-2xl text-slate-500 font-medium mb-12 max-w-2xl mx-auto leading-relaxed">The AI-native workspace designed to turn chaotic notes into structured dominance. Instant flashcards, summaries, and deep dives.</p>
        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <button onclick="toggleAuth(true, true)" class="bg-black text-white px-12 py-6 rounded-2xl font-black text-xl btn-aura">Start Building Free â€”></button>
            <button class="bg-white border border-slate-200 px-12 py-6 rounded-2xl font-black text-xl hover:bg-slate-50 transition">Watch Demo</button>
        </div>
    </header>

    <section id="features" class="py-32 px-6 max-w-7xl mx-auto grid md:grid-cols-3 gap-8">
        <div class="p-12 bg-white rounded-[3rem] border border-slate-100 card-shadow">
            <div class="text-5xl mb-6">âš¡</div>
            <h3 class="text-3xl font-black mb-4">Instant Summaries</h3>
            <p class="text-slate-400 font-bold leading-relaxed">Condense 50-page textbooks into 5-minute reads without losing the core intent.</p>
        </div>
        <div class="p-12 bg-white rounded-[3rem] border border-slate-100 card-shadow">
            <div class="text-5xl mb-6">ðŸŽ´</div>
            <h3 class="text-3xl font-black mb-4">Auto-Flashcards</h3>
            <p class="text-slate-400 font-bold leading-relaxed">AI detects key concepts and builds Anki-style cards for you automatically.</p>
        </div>
        <div class="p-12 bg-white rounded-[3rem] border border-slate-100 card-shadow">
            <div class="text-5xl mb-6">ðŸ§ </div>
            <h3 class="text-3xl font-black mb-4">Explain Mode</h3>
            <p class="text-slate-400 font-bold leading-relaxed">Stuck on a concept? Clarity breaks it down like you're fiveâ€”or like you're a PhD.</p>
        </div>
    </section>

    <div id="authModal" class="hidden fixed inset-0 z-[200] auth-modal flex items-center justify-center p-6">
        <div class="bg-white w-full max-w-lg rounded-[3rem] p-12 relative shadow-2xl overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-right from-indigo-500 to-purple-500"></div>
            <button onclick="toggleAuth(false)" class="absolute top-8 right-8 text-slate-300 hover:text-black text-4xl font-black transition">&times;</button>
            
            <div class="text-center mb-12">
                <img src="Clarity Logo.png" class="h-16 mx-auto mb-6">
                <h2 id="authTitle" class="text-4xl font-black tracking-tighter">Welcome Back</h2>
                <p class="text-slate-400 font-bold mt-2">The future of study is here.</p>
            </div>

            <button id="googleBtn" class="w-full flex items-center justify-center gap-4 border-2 border-slate-100 py-5 rounded-2xl font-black text-lg hover:bg-slate-50 transition-all mb-6 group">
                <img src="GLogo.png" class="h-6 w-6 group-hover:scale-110 transition"> Continue with Google
            </button>

            <div class="flex items-center gap-4 mb-6">
                <div class="h-px bg-slate-100 flex-1"></div>
                <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest">Or Secure Login</span>
                <div class="h-px bg-slate-100 flex-1"></div>
            </div>

            <div class="space-y-4">
                <input type="email" id="email" placeholder="Email Address" class="w-full bg-slate-50 p-5 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-indigo-600 focus:bg-white transition-all">
                <input type="password" id="pass" placeholder="Password" class="w-full bg-slate-50 p-5 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-indigo-600 focus:bg-white transition-all">
                <button id="mainAction" class="w-full bg-black text-white py-5 rounded-2xl font-black text-xl shadow-xl hover:bg-indigo-600 transition-all active:scale-95">CONTINUE</button>
            </div>

            <p class="text-center mt-8 font-bold text-slate-400">
                <span id="toggleText">Don't have an account?</span> 
                <button onclick="toggleMode()" id="toggleBtn" class="text-indigo-600 underline ml-1 hover:text-indigo-800 transition">Create One</button>
            </p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyAoyilOSkLk7uQVC4znit855wfAwVXU3Uo", authDomain: "clarity-study-cd835.firebaseapp.com", projectId: "clarity-study-cd835", storageBucket: "clarity-study-cd835.firebasestorage.app", messagingSenderId: "92484724607", appId: "1:92484724607:web:d07cbc3f0238264ecf9c4a" };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();

        let isSignUp = false;

        window.toggleAuth = (show, up = false) => {
            isSignUp = up;
            document.getElementById('authModal').classList.toggle('hidden', !show);
            updateUI();
        };

        window.toggleMode = () => {
            isSignUp = !isSignUp;
            updateUI();
        };

        function updateUI() {
            document.getElementById('authTitle').innerText = isSignUp ? "Join Clarity" : "Welcome Back";
            document.getElementById('toggleText').innerText = isSignUp ? "Already a member?" : "Don't have an account?";
            document.getElementById('toggleBtn').innerText = isSignUp ? "Log In" : "Create One";
            document.getElementById('mainAction').innerText = isSignUp ? "CREATE ACCOUNT" : "SIGN IN";
        }

        // GOOGLE LOGIN (Auto-Verified)
        document.getElementById('googleBtn').onclick = async () => {
            try {
                const res = await signInWithPopup(auth, provider);
                const user = res.user;
                const snap = await getDoc(doc(db, "users", user.uid));
                
                if(!snap.exists()) {
                    await setDoc(doc(db, "users", user.uid), { 
                        email: user.email, 
                        isVerified: true, 
                        nickname: "", 
                        createdAt: new Date() 
                    });
                }
                window.location.href = "workspace.html";
            } catch (e) { alert(e.message); }
        };

        // EMAIL SIGNUP / LOGIN
        document.getElementById('mainAction').onclick = async () => {
            const email = document.getElementById('email').value, pass = document.getElementById('pass').value;
            if(!email || !pass) return alert("Fill all fields");

            try {
                if(isSignUp) {
                    const res = await createUserWithEmailAndPassword(auth, email, pass);
                    const code = Math.floor(100000 + Math.random() * 900000).toString();
                    
                    await setDoc(doc(db, "users", res.user.uid), { 
                        email: email, 
                        isVerified: false, 
                        tempCode: code, 
                        nickname: "" 
                    });

                    // FIRE EMAIL API
                    await fetch('/api/send', { 
                        method: 'POST', 
                        headers: {'Content-Type': 'application/json'}, 
                        body: JSON.stringify({ email: email, code: code }) 
                    });
                    
                    window.location.href = "verify.html";
                } else {
                    await signInWithEmailAndPassword(auth, email, pass);
                    window.location.href = "workspace.html";
                }
            } catch (err) { alert(err.message); }
        };
    </script>
</body>
</html>
